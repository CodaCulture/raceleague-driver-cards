<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Driver Rating Card</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
:root{
  --bg1:#111;
  --bg2:#000;
  --accent:#fff;
  --stat:#fff;
}

body{
  margin:0;
  background:#0b0b10;
  font-family:Arial,sans-serif;
  color:#fff;
  display:flex;
  justify-content:center;
  padding:24px;
}

.panel{width:460px;display:grid;gap:14px}

/* CONTROLS */
.toolbar{
  background:rgba(0,0,0,.45);
  border-radius:18px;
  padding:16px;
  display:grid;
  gap:10px;
}
.toolbar select,
.toolbar input,
.toolbar button{
  padding:12px;
  border-radius:12px;
  border:none;
  font-weight:700;
}
.toolbar select,
.toolbar input{
  background:#111;
  color:#fff;
}
.toolbar button{
  background:#3a5cff;
  color:#fff;
  cursor:pointer;
}

/* CARD */
.card{
  position:relative;
  border-radius:30px;
  padding:24px;
  overflow:hidden;
  box-shadow:0 40px 90px rgba(0,0,0,.75);
}
.card::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  z-index:-3;
}
.card::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(60deg,rgba(255,255,255,.04) 1px,transparent 1px);
  background-size:28px 28px;
  opacity:.45;
  z-index:-2;
}

.accent{
  position:absolute;
  left:0;top:0;bottom:0;
  width:8px;
  background:var(--accent);
  box-shadow:0 0 18px var(--accent);
}

/* TEAM LOGO BACKDROP (AUTO) */
.team-bg{
  position:absolute;
  inset:-20%;
  background-position:center;
  background-size:contain;
  background-repeat:no-repeat;
  opacity:.085;
  filter:blur(2px);
  transform:scale(1.1);
  z-index:-1;
}

/* HEADER */
.top{display:grid;justify-items:center;gap:14px}
.avatar{
  width:120px;height:120px;
  border-radius:22px;
  object-fit:cover;
  background:#000;
}
.name{
  font-size:22px;
  font-weight:900;
  letter-spacing:1px;
  text-transform:uppercase;
}

/* RATING */
.avg{
  font-size:64px;
  font-weight:900;
  text-align:center;
  margin-top:8px;
}
.avg-sub{text-align:center;opacity:.7;font-size:12px}

/* STATS */
.stats{
  margin-top:18px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
.stat{
  background:rgba(0,0,0,.5);
  border-radius:16px;
  padding:12px;
  display:grid;
  gap:6px;
}
.stat label{font-size:12px;opacity:.7;font-weight:800}
.value{
  padding:10px;
  border-radius:12px;
  background:var(--stat);
  color:#000;
  font-size:24px;
  font-weight:900;
  text-align:center;
}

.export{
  padding:14px;
  border-radius:14px;
  border:none;
  background:#3a5cff;
  color:#fff;
  font-weight:900;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="panel">

  <div class="toolbar">
    <select id="team">
      <option value="vassetti">Vassetti Corse</option>
      <option value="vassetti_enduro">Vassetti Enduro</option>
      <option value="mps">MPS Racing Team</option>
      <option value="lotus">Lotus GP</option>
      <option value="nc">NC Corse</option>
      <option value="aierra">Aierra Racing</option>
      <option value="stuttgart">Stuttgart</option>
      <option value="redboars">Red Boars Racing</option>
      <option value="hive">CS Hive Racing</option>
      <option value="mimso">Mimso LTS Racing</option>
      <option value="atlas">Atlas GP</option>
    </select>

    <input id="driverNameInput" placeholder="Driver Name">

    <label>Driver Avatar (PNG)</label>
    <input type="file" id="avatarUpload" accept="image/png">

    <button onclick="applyAll()">Apply</button>
  </div>

  <div class="card" id="card">
    <div class="accent"></div>
    <div class="team-bg" id="teamBg"></div>

    <div class="top">
      <img id="avatar" class="avatar">
      <div class="name" id="driverName">DRIVER</div>
    </div>

    <div class="avg" id="average">6.75</div>
    <div class="avg-sub">Average Rating</div>
    <div class="stats" id="stats"></div>
  </div>

  <button class="export" onclick="exportPNG()">Export PNG</button>
</div>

<script>
const teams={
  vassetti:{bg1:"#F2C300",bg2:"#0B0B0B",accent:"#F2C300",stat:"#F2C300",logo:"assets/logos/vassetti.png"},
  vassetti_enduro:{bg1:"#0B0B0B",bg2:"#000000",accent:"#F2C300",stat:"#F2C300",logo:"assets/logos/vassetti_enduro.png"},
  lotus:{bg1:"#B89B3C",bg2:"#0B0B0B",accent:"#B89B3C",stat:"#B89B3C",logo:"assets/logos/lotus.png"},
  nc:{bg1:"#C40000",bg2:"#0B0B0B",accent:"#FFD200",stat:"#FFD200",logo:"assets/logos/nc.png"},
  mps:{bg1:"#8E8E8E",bg2:"#140000",accent:"#B00000",stat:"#E0E0E0",logo:"assets/logos/mps.png"},
  aierra:{bg1:"#FFFFFF",bg2:"#111111",accent:"#FF4FA3",stat:"#FF4FA3",logo:"assets/logos/aierra.png"}, /* primary white, secondary pink */
  stuttgart:{bg1:"#CFCFCF",bg2:"#0A3A6A",accent:"#0A3A6A",stat:"#CFCFCF",logo:"assets/logos/stuttgart.png"},
  redboars:{bg1:"#0B1530",bg2:"#C40000",accent:"#FFD200",stat:"#C40000",logo:"assets/logos/redboars.png"},
  hive:{bg1:"#0F1F3A",bg2:"#000814",accent:"#C8A100",stat:"#C8A100",logo:"assets/logos/hive.png"},
  mimso:{bg1:"#0B2A1A",bg2:"#102015",accent:"#FF7A18",stat:"#FF7A18",logo:"assets/logos/mimso.png"},
  atlas:{bg1:"#7FD3FF",bg2:"#FFFFFF",accent:"#7FD3FF",stat:"#7FD3FF",logo:"assets/logos/atlas.png"}
};

const ratings=[
 ["Attacking",6],
 ["Defending",6],
 ["Speed",7.5],
 ["Consistency",7],
 ["Car Control",6.5],
 ["Cornering",7.75],
 ["Logic",7.25]
];

const statsEl=document.getElementById("stats");

function renderStats(){
 statsEl.innerHTML="";
 ratings.forEach(([n,v])=>{
  const s=document.createElement("div");
  s.className="stat";
  s.innerHTML=`<label>${n}</label><div class="value">${v.toFixed(2)}</div>`;
  statsEl.appendChild(s);
 });
 updateAvg();
}

function updateAvg(){
 const avg=ratings.reduce((a,r)=>a+r[1],0)/ratings.length;
 document.getElementById("average").textContent=(Math.round(avg*4)/4).toFixed(2);
}

function applyTeam(){
 const t=teams[document.getElementById("team").value];
 const card=document.getElementById("card");
 card.style.setProperty("--bg1",t.bg1);
 card.style.setProperty("--bg2",t.bg2);
 card.style.setProperty("--accent",t.accent);
 card.style.setProperty("--stat",t.stat);

 // Auto-load the team logo as background watermark
 document.getElementById("teamBg").style.backgroundImage = `url(${t.logo})`;
}

function loadImage(input,cb){
 if(!input.files.length)return;
 const r=new FileReader();
 r.onload=e=>cb(e.target.result);
 r.readAsDataURL(input.files[0]);
}

function applyAll(){
 document.getElementById("driverName").textContent =
  document.getElementById("driverNameInput").value.toUpperCase();

 applyTeam();

 loadImage(document.getElementById("avatarUpload"),src=>{
  document.getElementById("avatar").src=src;
 });
}

document.getElementById("team").addEventListener("change", applyTeam);

async function exportPNG(){
 const canvas=await html2canvas(document.getElementById("card"),{scale:2});
 const a=document.createElement("a");
 a.href=canvas.toDataURL("image/png");
 a.download="driver_card.png";
 a.click();
}

renderStats();
applyTeam();
</script>
</body>
</html>
